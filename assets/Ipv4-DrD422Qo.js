var x=Object.defineProperty;var tt=(u,e,n)=>e in u?x(u,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):u[e]=n;var C=(u,e,n)=>tt(u,typeof e!="symbol"?e+"":e,n);import{u as lt,i as et}from"./action-Bs7nETnT.js";import{aG as it,aH as g,l as at,az as nt,h as b,w as ot,I as st,J as l,A as r,u as i,z as F,E as O,S as T,L as rt,H as v,y as z,ai as ut,C as y,P as B,K as N,G as pt}from"./vendor-C2WOFBut.js";import{$ as ct,y as dt,S as mt}from"./tool-C-4_lXSG.js";import{I as a}from"./Item-Cy9kI2xF.js";import"./vendor-lodash-BDISS5yc.js";import"./modulepreload-polyfill-B5Qt9EMX.js";import"./vendor-monaco-DSO-f-Kq.js";const ft="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_@",_t=(u,e,n,o="")=>{o=o||ft;let p=`${u}`;e<=36&&(p=p.toLowerCase());const _=it.clone({ALPHABET:o,EXPONENTIAL_AT:1e9}),f=new _(p,e);if(f.isNaN())throw new Error(ct("radix_invalid_input",[e,u]));return f.toString(n)},S=u=>u.includes(".")&&u.substring(0,2).toUpperCase()==="0B"?k(u,10,2,"0b"):u,k=(u,e=10,n=10,o="")=>u.split(".").map(p=>(o&&p.length>o.length&&p.substring(0,o.length).toUpperCase()===o.toUpperCase()&&(p=p.substring(o.length)),p=p.replace(/\b(0+)/g,"")||"0",e===n?`${p}`:`${_t(p,n,e).padStart(e===2?8:e===8?4:2,"0").toUpperCase()}`)).join("."),W=u=>{let e=`${u}`.trim();if(e=S(e),e.includes(".")){const o=e.split(".");if(o.length!==4)throw new Error("反掩码格式错误：需要 4 段点分格式，如 0.0.63.255");let p=0;for(const _ of o){let f;const c=_.trim();if(c.toLowerCase().startsWith("0x")?f=parseInt(c,16):c.toLowerCase().startsWith("0b")?f=parseInt(c.substring(2),2):/^[01]{8}$/.test(c)?f=parseInt(c,2):/^[0-9a-f]+$/i.test(c)&&/[a-f]/i.test(c)?f=parseInt(c,16):c.length>1&&c.startsWith("0")&&!c.includes("8")&&!c.includes("9")?f=parseInt(c,8):f=parseInt(c,10),isNaN(f)||f<0||f>255)throw new Error(`反掩码值无效：每段需为 0-255，当前输入 "${c}"`);p=p<<8|f}return p>>>0}const n=parseInt(e,10);if(!isNaN(n)&&n>=0&&n<=4294967295)return n>>>0;throw new Error("反掩码格式错误：支持点分十进制（如 0.0.63.255）、整型、八进制、十六进制、二进制")},vt=u=>{const n=~W(u)>>>0;if(n===0)return!0;const o=~n>>>0;return(o&o+1)===0},D=u=>{const e=W(u),n=g.long2ip(e);return{mask:n,long:`${e}`,mask2:k(n,2),mask8:k(n,8),mask16:k(n,16)}};class A{constructor(e,n){C(this,"ipLong");C(this,"wildcardLong");C(this,"ip");e=S(e),this.ip=`${g.long2ip(g.ip2long(e))}`,this.ipLong=g.ip2long(e)>>>0,this.wildcardLong=W(n)}wildcardBits(){let e=0,n=this.wildcardLong;for(;n;)e+=n&1,n>>>=1;return e}matchCount(){return 2**this.wildcardBits()}fixedBits(){return(this.ipLong&~this.wildcardLong>>>0)>>>0}firstMatch(){return g.long2ip(this.fixedBits())}lastMatch(){return g.long2ip((this.fixedBits()|this.wildcardLong)>>>0)}matchPattern(){const e=[];for(let n=3;n>=0;n--){const o=this.ipLong>>>n*8&255,p=this.wildcardLong>>>n*8&255;if(p===0)e.push(`${o}`);else if(p===255)e.push("0-255");else{const _=o&(~p&255),f=_,c=_|p;e.push(`${f}-${c}`)}}return e.join(".")}ipInfo(){return{ip:this.ip,long:`${this.ipLong}`,ip2:k(this.ip,2),ip8:k(this.ip,8),ip16:k(this.ip,16)}}}const kt=u=>{if(isNaN(u)||u>4294967294||u<1)throw new Error("Available Size Invalid");let e=parseInt(`${Math.log(u)/Math.log(2)}`)+1;return 2**e-u<2&&(e+=1),32-e};class G{constructor(e="192.168.0.1",n="24"){C(this,"netmask");C(this,"ip","");!`${n}`.includes(".")&&parseInt(`${n}`,10)>32&&(n=g.long2ip(parseInt(`${n}`,10))),e=S(e),n=S(n),this.netmask=new g.Netmask(`${e}/${n}`),this.ip=`${g.long2ip(g.ip2long(e))}`}available(){return Math.max(this.netmask.size-2,0)}size(){return this.netmask.size}base(){return this.netmask.base}first(){return this.netmask.first}last(){return this.netmask.last}broadcast(){return this.netmask.broadcast||"-"}ipInfo(){return{ip:this.ip,long:`${g.ip2long(this.ip)}`,ip2:k(this.ip,2),ip8:k(this.ip,8),ip16:k(this.ip,16)}}maskInfo(){const e=`${g.long2ip(this.netmask.maskLong)}`;return{bit:`${this.netmask.bitmask}`,long:`${this.netmask.maskLong}`,mask:e,mask2:k(e,2),mask8:k(e,8),mask16:k(e,16),opposite:`${this.netmask.hostmask}`}}}const gt={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},$t={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr 1fr"}},wt={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},ht={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},bt={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr 1fr"}},yt={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},It={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},Vt={style:{display:"grid","grid-template-columns":"8fr 8fr 10fr 10fr"}},Ct={style:{display:"grid","grid-template-columns":"8fr 8fr 10fr 10fr"}},Ft=at({__name:"Ipv4",async setup(u){let e,n;const o=lt(([e,n]=nt(()=>et({input:"192.168.0.1",mask:"24",maskMode:"mask",subnetOption:dt("text")},{paste:t=>/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(t)})),e=await e,n(),e)),p=b(!1);let _=b(!1);const f=b(254);let c=b(""),m=b(new G);const M=b(!1);let E=b(!1),$=b(new A("0.0.0.0","0.0.0.0")),I=b(D("0.0.0.0"));const J=pt(()=>{const t=[];return m.value.netmask.forEach(s=>{t.push(s)}),mt.formObject(t)}),K=()=>{o.current.mask=`${kt(f.value)}`,_.value=!1};return ot(()=>({input:o.current.input,mask:o.current.mask,maskMode:o.current.maskMode}),({input:t,mask:s,maskMode:V})=>{c.value="",E.value=!1;try{if(V==="wildcard"){const h=s||"0.0.0.0";I.value=D(h),E.value=!vt(h),$.value=new A(t,h)}else m.value=new G(t,s);o.save()}catch(h){c.value=$error(h)}},{immediate:!0}),(t,s)=>{const V=v("HelpTip"),h=v("Input"),X=v("Select"),H=v("Icon"),U=v("Button"),L=v("Align"),w=v("Card"),q=v("Exception"),j=v("HeightResize"),P=v("Modal"),Q=v("SerializeOutput"),Y=v("ExtendPage"),Z=v("InputNumber");return z(),st(rt,null,[l(L,{horizontal:"center",class:"sectool-page-option",bottom:"default"},{default:r(()=>[l(h,{size:"large",width:300,modelValue:i(o).current.input,"onUpdate:modelValue":s[1]||(s[1]=d=>i(o).current.input=d),label:t.$t("ipcalc_ip")},{suffix:r(()=>[l(V,{onClick:s[0]||(s[0]=d=>p.value=!0),icon:"info",text:t.$t("ipcalc_format")},null,8,["text"])]),_:1},8,["modelValue","label"]),l(X,{size:"large",modelValue:i(o).current.maskMode,"onUpdate:modelValue":s[2]||(s[2]=d=>i(o).current.maskMode=d),options:[{label:t.$t("ipcalc_mask"),value:"mask"},{label:t.$t("ipcalc_wildcard"),value:"wildcard"}]},null,8,["modelValue","options"]),l(h,{size:"large",width:220,modelValue:i(o).current.mask,"onUpdate:modelValue":s[5]||(s[5]=d=>i(o).current.mask=d)},ut({suffix:r(()=>[l(V,{onClick:s[4]||(s[4]=d=>p.value=!0),icon:"info",text:t.$t("ipcalc_format")},null,8,["text"])]),_:2},[i(o).current.maskMode==="mask"?{name:"append",fn:r(()=>[l(U,{onClick:s[3]||(s[3]=d=>T(_)?_.value=!0:_=!0)},{default:r(()=>[l(H,{hover:"",name:"setting",tooltip:t.$t("ipcalc_mask_set_title")},null,8,["tooltip"])]),_:1})]),key:"0"}:void 0]),1032,["modelValue"]),l(V,{link:"https://www.npmjs.com/package/netmask"})]),_:1}),i(c)===""&&i(o).current.maskMode==="mask"?(z(),F(L,{key:0,direction:"vertical"},{default:r(()=>[l(w,{title:t.$t("ipcalc_ip_info"),padding:"0"},{extra:r(()=>[B(N(i(o).current.input),1)]),default:r(()=>[y("div",gt,[l(a,{title:t.$t("ipcalc_ip_info_ip10"),value:i(m).ipInfo().ip},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_ip_info_long"),value:i(m).ipInfo().long},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_ip_info_ip8"),value:i(m).ipInfo().ip8},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_ip_info_ip16"),value:i(m).ipInfo().ip16},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_ip_info_ip2"),value:i(m).ipInfo().ip2,style:{"grid-column-start":"2","grid-column-end":"4"}},null,8,["title","value"])])]),_:1},8,["title"]),l(w,{title:t.$t("ipcalc_mask_info"),padding:"0"},{extra:r(()=>[B(N(i(o).current.mask),1)]),default:r(()=>[y("div",$t,[l(a,{title:t.$t("ipcalc_mask"),value:i(m).maskInfo().bit},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_mask_info_mask"),value:i(m).maskInfo().mask},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_mask_info_long"),value:i(m).maskInfo().long},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_mask_info_opposite"),value:i(m).maskInfo().opposite},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_mask_info_mask8"),value:i(m).maskInfo().mask8},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_mask_info_mask16"),value:i(m).maskInfo().mask16},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_mask_info_mask2"),value:i(m).maskInfo().mask2,style:{"grid-column-start":"3","grid-column-end":"5"}},null,8,["title","value"])])]),_:1},8,["title"]),l(w,{title:t.$t("ipcalc_network_info"),padding:"0"},{extra:r(()=>[l(U,{type:"primary",size:"small",text:t.$t("ipcalc_subnet"),onClick:s[6]||(s[6]=d=>M.value=!0)},null,8,["text"])]),default:r(()=>[y("div",wt,[l(a,{title:t.$t("ipcalc_network_info_available"),value:i(m).available()},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_network_info_size"),value:i(m).size()},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_network_info_base"),value:i(m).base()},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_network_info_first"),value:i(m).first()},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_network_info_last"),value:i(m).last()},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_network_info_broadcast"),value:i(m).broadcast()},null,8,["title","value"])])]),_:1},8,["title"])]),_:1})):O("",!0),i(c)===""&&i(o).current.maskMode==="wildcard"?(z(),F(L,{key:1,direction:"vertical"},{default:r(()=>[l(w,{title:t.$t("ipcalc_ip_info"),padding:"0"},{extra:r(()=>[B(N(i(o).current.input),1)]),default:r(()=>[y("div",ht,[l(a,{title:t.$t("ipcalc_ip_info_ip10"),value:i($).ipInfo().ip},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_ip_info_long"),value:i($).ipInfo().long},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_ip_info_ip8"),value:i($).ipInfo().ip8},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_ip_info_ip16"),value:i($).ipInfo().ip16},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_ip_info_ip2"),value:i($).ipInfo().ip2,style:{"grid-column-start":"2","grid-column-end":"4"}},null,8,["title","value"])])]),_:1},8,["title"]),l(w,{title:i(E)?`${t.$t("ipcalc_wildcard_info")} (${t.$t("ipcalc_wildcard_noncontiguous")})`:t.$t("ipcalc_wildcard_info"),padding:"0"},{extra:r(()=>[B(N(i(o).current.mask),1)]),default:r(()=>[y("div",bt,[l(a,{title:t.$t("ipcalc_wildcard_info_mask"),value:i(I).mask},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_wildcard_info_long"),value:i(I).long},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_wildcard_info_mask8"),value:i(I).mask8},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_wildcard_info_mask16"),value:i(I).mask16},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_wildcard_info_mask2"),value:i(I).mask2,style:{"grid-column-start":"2","grid-column-end":"5"}},null,8,["title","value"])])]),_:1},8,["title"]),l(w,{title:t.$t("ipcalc_wildcard_match"),padding:"0"},{default:r(()=>[y("div",yt,[l(a,{title:t.$t("ipcalc_wildcard_match_count"),value:i($).matchCount()},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_wildcard_match_bits"),value:i($).wildcardBits()},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_wildcard_match_pattern"),value:i($).matchPattern()},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_wildcard_match_first"),value:i($).firstMatch()},null,8,["title","value"]),l(a,{title:t.$t("ipcalc_wildcard_match_last"),value:i($).lastMatch()},null,8,["title","value"])])]),_:1},8,["title"])]),_:1})):O("",!0),i(c)!==""?(z(),F(j,{key:2,append:[".sectool-page-option"]},{default:r(()=>[l(q,{content:i(c)},null,8,["content"])]),_:1})):O("",!0),l(P,{title:t.$t("ipcalc_format"),modelValue:p.value,"onUpdate:modelValue":s[7]||(s[7]=d=>p.value=d),width:"98%","footer-type":"normal"},{default:r(()=>[l(L,{direction:"vertical"},{default:r(()=>[l(w,{title:t.$t("ipcalc_ip"),padding:"0"},{default:r(()=>[y("div",It,[l(a,{title:t.$t("ipcalc_ip_info_ip10"),value:"192.168.0.1"},null,8,["title"]),l(a,{title:t.$t("ipcalc_ip_info_long"),value:"3232235521"},null,8,["title"]),l(a,{title:t.$t("ipcalc_ip_info_ip8"),value:"0300.0250.0000.0001"},null,8,["title"]),l(a,{title:t.$t("ipcalc_ip_info_ip16"),value:"0xC0.0xA8.0x00.0x01"},null,8,["title"]),l(a,{title:t.$t("ipcalc_ip_info_ip2"),value:"0b11000000.0b10101000.0b00000000.0b00000001",style:{"grid-column-start":"2","grid-column-end":"4"}},null,8,["title"])])]),_:1},8,["title"]),l(w,{title:t.$t("ipcalc_mask"),padding:"0"},{default:r(()=>[y("div",Vt,[l(a,{title:t.$t("ipcalc_mask"),value:"24"},null,8,["title"]),l(a,{title:t.$t("ipcalc_mask_info_long"),value:"4294967040"},null,8,["title"]),l(a,{title:t.$t("ipcalc_mask_info_mask16"),value:"0xFF.0xFF.0xFF.0x00"},null,8,["title"]),l(a,{title:t.$t("ipcalc_mask_info_mask8"),value:"0377.0377.0377.0000"},null,8,["title"]),l(a,{title:t.$t("ipcalc_mask_info_mask"),value:"255.255.255.0"},null,8,["title"]),l(a,{title:t.$t("ipcalc_mask_info_mask2"),value:"0b11111111.0b11111111.0b11111111.0b00000000",style:{"grid-column-start":"2","grid-column-end":"5"}},null,8,["title"])])]),_:1},8,["title"]),l(w,{title:t.$t("ipcalc_wildcard"),padding:"0"},{default:r(()=>[y("div",Ct,[l(a,{title:t.$t("ipcalc_mask_info_mask"),value:"0.0.0.255"},null,8,["title"]),l(a,{title:t.$t("ipcalc_mask_info_long"),value:"255"},null,8,["title"]),l(a,{title:t.$t("ipcalc_mask_info_mask16"),value:"0x00.0x00.0x00.0xFF"},null,8,["title"]),l(a,{title:t.$t("ipcalc_mask_info_mask8"),value:"0000.0000.0000.0377"},null,8,["title"]),l(a,{title:t.$t("ipcalc_mask_info_mask2"),value:"0b00000000.0b00000000.0b00000000.0b11111111",style:{"grid-column-start":"2","grid-column-end":"5"}},null,8,["title"])])]),_:1},8,["title"])]),_:1})]),_:1},8,["title","modelValue"]),l(Y,{modelValue:M.value,"onUpdate:modelValue":s[12]||(s[12]=d=>M.value=d)},{default:r(()=>[l(w,{title:`${i(o).current.input} ${t.$t("ipcalc_subnet")}`,padding:"0"},{extra:r(()=>[l(L,null,{default:r(()=>[l(h,{size:"small",width:200,modelValue:i(o).current.mask,"onUpdate:modelValue":s[11]||(s[11]=d=>i(o).current.mask=d),label:t.$t("ipcalc_mask")},{append:r(()=>[l(U,{onClick:s[9]||(s[9]=d=>T(_)?_.value=!0:_=!0)},{default:r(()=>[l(H,{hover:"",name:"setting",tooltip:t.$t("ipcalc_mask_set_title")},null,8,["tooltip"])]),_:1})]),suffix:r(()=>[l(V,{onClick:s[10]||(s[10]=d=>p.value=!0),icon:"info",text:t.$t("ipcalc_format")},null,8,["text"])]),_:1},8,["modelValue","label"])]),_:1})]),default:r(()=>[l(j,{reduce:35},{default:r(({height:d})=>[l(Q,{"disabled-border":"",modelValue:i(o).current.subnetOption,"onUpdate:modelValue":s[8]||(s[8]=R=>i(o).current.subnetOption=R),allow:["json","xml","yaml","toml","php_array","properties","text"],content:J.value,height:d},null,8,["modelValue","content","height"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),l(P,{title:t.$t("ipcalc_mask_set_title"),modelValue:i(_),"onUpdate:modelValue":s[14]||(s[14]=d=>T(_)?_.value=d:_=d),"footer-type":"long",onOk:K},{default:r(()=>[l(Z,{size:"large",modelValue:f.value,"onUpdate:modelValue":s[13]||(s[13]=d=>f.value=d),label:t.$t("ipcalc_network_info_available")},null,8,["modelValue","label"])]),_:1},8,["title","modelValue"])],64)}}});export{Ft as default};
